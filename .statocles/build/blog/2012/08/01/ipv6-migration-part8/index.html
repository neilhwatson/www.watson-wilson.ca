<!DOCTYPE html>
<html>
    <head>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link href="/theme/css/readability-bootstrap.min.css" rel="stylesheet">
        <!--<link rel="stylesheet" href="/theme/css/statocles-bootstrap.css" />-->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <title>IPv6 Migration part 8 - Neil H. Watson</title>
        <meta content="Statocles 0.059" name="generator">
        
    </head>
    <body>
        <header>
            <nav class="navbar navbar-default navbar-static-top" role="navigation">
                <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button class="navbar-toggle" data-target="#top-navbar-collapse-1" data-toggle="collapse" type="button">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">Neil H. Watson</a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li><a href="/page/about">About me</a></li>
                            <li><a href="/static/resume_neil_h_watson.pdf">Resume</a></li>
                        </ul>
                        
                    </div>
                </div>
            </nav>
            
        </header>
        <div class="main container">
            <div class="row">

    <div class="col-md-9">
        <main>
            <header>
                <h1>IPv6 Migration part 8</h1>
                <p class="tags">Tags:
                    <a href="/blog/tag/ipv6/" rel="tag">ipv6</a>
                    <a href="/blog/tag/networking/" rel="tag">networking</a>
                </p>

                <aside>
                    <p><time datetime="2012-08-01">
                        Posted on 2012-08-01
                    </time>
                    </p>
                </aside>


            </header>
            <section id="section-1">
                <p>DNS for IPV6 is just like IPV4, but longer. In part 2 I discussed DNS quad A
records. Now I&#39;ll explain IPV6 PTR records.</p>

            </section>
            <section id="section-2">
                <p>In this example I&#39;ll use Bind and the subnet 2001:470:1d:a2f::/64. First load
the zone file.</p>

<pre><code>zone &quot;f.2.a.0.d.1.0.0.0.7.4.0.1.0.0.2.ip6.arpa&quot; {
   type master;
   file &quot;/etc/bind/db.2001:470:1d:a2f&quot;;
};
</code></pre>

<p>Note that &quot;ipv6.arpa&quot; is different than IPV4 (in-addr.arpa). The 16 numbers in
the zone make up the subnet (a /64). As is custom, they are in reverse order.
The last 16 digits, not shown here, are all part of the subnet and are not yet
needed.</p>

<p>In PTR records, IPV6 addresses must be reversed just like IPV4 addresses. When
done manually this can drive you mental because IPV6 addresses are up to 32
characters long. Fortunately you can use tools to reverse these for you.
Consider the humble host command.</p>

<pre><code># host 2001:470:1d:a2f::1
1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.f.2.a.0.d.1.0.0.0.7.4.0.1.0.0.2.ip6.arpa domain name pointer alix.watson-wilson.ca.
</code></pre>

<p>Also, the dig command.</p>

<pre><code># dig -x 2001:470:1d:a2f::1

; &lt;&lt;&gt;&gt; DiG 9.8.4-rpz2+rl005.12-P1 &lt;&lt;&gt;&gt; -x 2001:470:1d:a2f::1
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 6661
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 3

;; QUESTION SECTION:
;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.f.2.a.0.d.1.0.0.0.7.4.0.1.0.0.2.ip6.arpa. IN PTR
</code></pre>

<p>Avid script writers are invited to create ingenious ways to cut the first or
last 16 digits as needed. Next up the zone file.</p>

<pre><code>;; 2001:470:1d:a2f/64
$TTL 3h
@ IN SOA sol.watson-wilson.ca. hostmaster.watson-wilson.ca. (
        30              ; TODO SERIAL
        3h              ; 3 hour refresh
        1h              ; 1 hour retry
        1w              ; 1 week expire
        1h)     ; negatic TTL cache

   NS sol.watson-wilson.ca.
   NS alix.watson-wilson.ca.

$ORIGIN f.2.a.0.d.1.0.0.0.7.4.0.1.0.0.2.ip6.arpa.

1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0 IN PTR alix.watson-wilson.ca.
2.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0 IN PTR ettin.watson-wilson.ca.
3.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0 IN PTR scope.watson-wilson.ca.
</code></pre>

<p>Most of the file is as we would use in IPV4. The last parts are IPV6 related.
The &#39;$ORIGIN&#39; denotes the subnet. This is a short cut. Bind will know to add
this to the PTR records below it. The PTR records show the last 16 digits of
the IP address, again in reverse order. Bind will put the origin and the PTR
record together like this:</p>

<pre><code>1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.f.2.a.0.d.1.0.0.0.7.4.0.1.0.0.2.ip6.arpa IN PTR alix.watson-wilson.ca.
</code></pre>

<p>That&#39;s enough for working PTR records in IPV6. I hope you found this help.</p>

            </section>
        </main>


    </div>

    <div class="col-md-3">
        <iframe frameborder="0" src="https://duckduckgo.com/search.html?site=watson-wilson.ca&amp;prefill=Search DuckDuckGo" style="overflow:hidden;margin:0;padding:0;width:350px;height:40px;"></iframe>

        <nav id="tags">
            <h1>Tags</h1>
            <ul class="list-inline">
                <li><a href="/blog/tag/apt/">apt</a></li>
                <li><a href="/blog/tag/backup/">backup</a></li>
                <li><a href="/blog/tag/cfengine/">cfengine</a></li>
                <li><a href="/blog/tag/cfengine-cookbook/">cfengine cookbook</a></li>
                <li><a href="/blog/tag/cheatsheet/">cheatsheet</a></li>
                <li><a href="/blog/tag/cli/">cli</a></li>
                <li><a href="/blog/tag/cluster/">cluster</a></li>
                <li><a href="/blog/tag/configuration-management/">configuration management</a></li>
                <li><a href="/blog/tag/cron/">cron</a></li>
                <li><a href="/blog/tag/debian/">debian</a></li>
                <li><a href="/blog/tag/dns/">dns</a></li>
                <li><a href="/blog/tag/dr/">dr</a></li>
                <li><a href="/blog/tag/heartbeat/">heartbeat</a></li>
                <li><a href="/blog/tag/high-availability/">high availability</a></li>
                <li><a href="/blog/tag/infosec/">infosec</a></li>
                <li><a href="/blog/tag/ipv6/">ipv6</a></li>
                <li><a href="/blog/tag/iscsi/">iscsi</a></li>
                <li><a href="/blog/tag/kvm/">kvm</a></li>
                <li><a href="/blog/tag/linux/">linux</a></li>
                <li><a href="/blog/tag/monitoring/">monitoring</a></li>
                <li><a href="/blog/tag/multipathd/">multipathd</a></li>
                <li><a href="/blog/tag/networking/">networking</a></li>
                <li><a href="/blog/tag/opensource/">opensource</a></li>
                <li><a href="/blog/tag/oracle/">oracle</a></li>
                <li><a href="/blog/tag/posix/">posix</a></li>
                <li><a href="/blog/tag/red-hat/">red hat</a></li>
                <li><a href="/blog/tag/regex/">regex</a></li>
                <li><a href="/blog/tag/rhev/">rhev</a></li>
                <li><a href="/blog/tag/san/">san</a></li>
                <li><a href="/blog/tag/shell/">shell</a></li>
                <li><a href="/blog/tag/solaris/">solaris</a></li>
                <li><a href="/blog/tag/ssh/">ssh</a></li>
                <li><a href="/blog/tag/subversion/">subversion</a></li>
                <li><a href="/blog/tag/sun/">sun</a></li>
                <li><a href="/blog/tag/support/">support</a></li>
                <li><a href="/blog/tag/svn/">svn</a></li>
                <li><a href="/blog/tag/sysadmin/">sysadmin</a></li>
                <li><a href="/blog/tag/vitualization/">vitualization</a></li>
            </ul>
        </nav>
    </div>

</div>

<div class="row">
   <img atl="Neil Watson" src="https://gravatar.com/avatar/1f0969599955a953e592034929ed7a23" style="float:left">

   <div class="col-md-1">
      <!-- Tweet this -->
      <a class="twitter-share-button" data-via="neil_h_watson" href="https://twitter.com/share">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<a class="twitter-follow-button" data-show-count="false" href="https://twitter.com/neil_h_watson">Follow @neil_h_watson</a>
   </div>

   <div class="col-md-1">
      <!-- follow me on twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

   </div>
</div>

        </div>
        <footer>
            
            <h1></h1>
            <div class="col-md-5"> </div>
            <div class="col-md-3 container tagline">
                <a href="http://preaction.me/statocles">Made with Statocles</a><br>
                <a href="http://www.perl.org">Powered by Perl</a>
            </div>
        </footer>
    </body>
</html>
