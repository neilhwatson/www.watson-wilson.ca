<!DOCTYPE html>
<html>
    <head>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link href="/theme/css/readability-bootstrap.min.css" rel="stylesheet">
        <!--<link rel="stylesheet" href="/theme/css/statocles-bootstrap.css" />-->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <title>IPv6 Migration part 4 - Neil H. Watson</title>
        <meta content="Statocles 0.059" name="generator">
        
    </head>
    <body>
        <header>
            <nav class="navbar navbar-default navbar-static-top" role="navigation">
                <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button class="navbar-toggle" data-target="#top-navbar-collapse-1" data-toggle="collapse" type="button">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">Neil H. Watson</a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li><a href="/">Blog</a></li>
                        </ul>
                        
                    </div>
                </div>
            </nav>
            
        </header>
        <div class="main container">
            <div class="row">

    <div class="col-md-9">
        <main>
            <header>
                <h1>IPv6 Migration part 4</h1>
                <p class="tags">Tags:
                    <a href="/blog/tag/ipv6/" rel="tag">ipv6</a>
                    <a href="/blog/tag/networking/" rel="tag">networking</a>
                </p>

                <aside>
                    <p><time datetime="2012-03-05">
                        Posted on 2012-03-05
                    </time>
                    </p>
                </aside>


            </header>
            <section id="section-1">
                <p>This website is now dual stacked to both IPV4 and IPV6. In part four of my IPV6
series I&#39;ll tell you what I learned during this migration.</p>

            </section>
            <section id="section-2">
                <p>This website consists of a web server, a database, an IP address and some DNS records. Before we get to that you should know a little about hosting providers and IPV6.</p>

<p>Not all hosting providers offer IPV6. Those that do offer IPV6 do not always offer the full service. If you are shopping for an IPV6 ready hosting provider here is a checklist.</p>

<pre><code>How many IPV6 addresses do you get? Convention is that you should be provided with a /64 block. That is not a typo.
Is there a way to manage IPV6 PTR addresses?
Does the network allow dual stack IPV4 and IPV6 addressing?
What does this all cost?
</code></pre>

<p>My hosting provider, Glesys provided me with a \64 block of IPV6 addresses and the ability to dual stack, all included in the price of my host. Sadly at this time Glesys does not offer PTR record management for IPV6 addresses (they do for IPV4 addresses). When I questioned Glesys about this I was told that they plan to offer IPV6 PTR management in Q2 of 2012.</p>

<p>The next step is to know what software will work with IPV6. My site runs Debian Squeeze at this time. The packages are quite dated. Apache easily works on IPV4 and IPV6 interfaces. Note that if you are using IP address virtual hosts, such as for SSL, you will need separate entries for IPV4 and IPV6 addresses.</p>

<p>Originally this site ran using MySQL. Sadly the version that ships with Debian Squeeze had IPV6 issues. The server seemed to work but the client did not. Supposedly later version of MySQL work fine. Instead I used Postgresql with no trouble.</p>

<p>The standard NTP daemon works fine dual stacked. However, IPV6 NTP servers are hard to find. Pool.ntp.org lacks full IPV6 support. Only 2.pool.ntp.org appears to have working IPV6 addresses at this time.</p>

<p>Those who know me will expect my report on Cfengine and IPV6. It works dual stacked and exclusively with IPV6 but not without an issue. You can see my findings here.</p>

<p>OpenSSH worked dual and single IPV6 stacked without issue.</p>

<p>When dealing directly with Linux I found no IPV6 issues including Ethernet bonding, network bridges and KVM virtualization. Do be aware that IPV6 allows for addresses to be auto configured. I did see this happen when routers outside of my control advertised address allocation. The solution for me was to make change in sysctl:</p>

<p>net.ipv6.conf.all.autoconf=0
net.ipv6.conf.all.accept_ra=0
net.ipv6.conf.default.autoconf=0</p>

<p>This instructs the kernel to ignore any attempts to auto-configure.</p>

<p>Remember from previous parts in this series that you&#39;ll need separate IPV6 firewall rules. With Linux, IPV6 traffic is filtered via ip6tables. This is virtually identical to the standard iptables for IPV4 networking. Wrappers like Fwbuilder and Shorewall both support IPV6.</p>

            </section>
        </main>


    </div>

    <div class="col-md-3">
        
        <nav id="tags">
            <h1>Tags</h1>
            <ul class="list-inline">
                <li><a href="/blog/tag/apt/">apt</a></li>
                <li><a href="/blog/tag/backup/">backup</a></li>
                <li><a href="/blog/tag/cfengine/">cfengine</a></li>
                <li><a href="/blog/tag/cfengine-cookbook/">cfengine cookbook</a></li>
                <li><a href="/blog/tag/cheatsheet/">cheatsheet</a></li>
                <li><a href="/blog/tag/cli/">cli</a></li>
                <li><a href="/blog/tag/cluster/">cluster</a></li>
                <li><a href="/blog/tag/configuration-management/">configuration management</a></li>
                <li><a href="/blog/tag/cron/">cron</a></li>
                <li><a href="/blog/tag/debian/">debian</a></li>
                <li><a href="/blog/tag/dns/">dns</a></li>
                <li><a href="/blog/tag/dr/">dr</a></li>
                <li><a href="/blog/tag/heartbeat/">heartbeat</a></li>
                <li><a href="/blog/tag/high-availability/">high availability</a></li>
                <li><a href="/blog/tag/infosec/">infosec</a></li>
                <li><a href="/blog/tag/ipv6/">ipv6</a></li>
                <li><a href="/blog/tag/iscsi/">iscsi</a></li>
                <li><a href="/blog/tag/kvm/">kvm</a></li>
                <li><a href="/blog/tag/linux/">linux</a></li>
                <li><a href="/blog/tag/monitoring/">monitoring</a></li>
                <li><a href="/blog/tag/multipathd/">multipathd</a></li>
                <li><a href="/blog/tag/networking/">networking</a></li>
                <li><a href="/blog/tag/opensource/">opensource</a></li>
                <li><a href="/blog/tag/oracle/">oracle</a></li>
                <li><a href="/blog/tag/posix/">posix</a></li>
                <li><a href="/blog/tag/red-hat/">red hat</a></li>
                <li><a href="/blog/tag/regex/">regex</a></li>
                <li><a href="/blog/tag/rhev/">rhev</a></li>
                <li><a href="/blog/tag/san/">san</a></li>
                <li><a href="/blog/tag/shell/">shell</a></li>
                <li><a href="/blog/tag/solaris/">solaris</a></li>
                <li><a href="/blog/tag/ssh/">ssh</a></li>
                <li><a href="/blog/tag/subversion/">subversion</a></li>
                <li><a href="/blog/tag/sun/">sun</a></li>
                <li><a href="/blog/tag/support/">support</a></li>
                <li><a href="/blog/tag/svn/">svn</a></li>
                <li><a href="/blog/tag/sysadmin/">sysadmin</a></li>
                <li><a href="/blog/tag/vitualization/">vitualization</a></li>
            </ul>
        </nav>
    </div>

</div>

        </div>
        <footer>
            
            <div class="container tagline">
                <a href="http://preaction.me/statocles">Made with Statocles</a><br>
                <a href="http://www.perl.org">Powered by Perl</a>
            </div>
        </footer>
    </body>
</html>
