<!DOCTYPE html>
<html>
    <head>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link href="/theme/css/readability-bootstrap.min.css" rel="stylesheet">
        <!--<link rel="stylesheet" href="/theme/css/statocles-bootstrap.css" />-->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <title>Neil H. Watson</title>
        <meta content="Statocles 0.073" name="generator">
        <link href="/blog/tag/monitoring.atom" rel="alternate" type="application/atom+xml">
        <link href="/blog/tag/monitoring.rss" rel="alternate" type="application/rss+xml">
        

        <!-- For source highlighting -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/default.min.css" rel="stylesheet">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

    </head>
    <body>
        <header>
            <nav class="navbar navbar-default navbar-static-top" role="navigation">
                <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button class="navbar-toggle" data-target="#top-navbar-collapse-1" data-toggle="collapse" type="button">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">Neil H. Watson</a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li><a href="/page/about">About me</a></li>
                            <li><a href="/static/resume_neil_h_watson.pdf">Resume</a></li>
                            <li><a href="/page/projects">Projects</a></li>
                        </ul>
                        
                    </div>
                </div>
            </nav>
            
        </header>
        <div class="main container">
            
<div class="row">

    <div class="col-md-9">
        <main>


            <article>
                <header>
                    <h1><a href="/blog/2013/10/31/opennms-the-open-source-enterprise-monitoring-solution-youve-never-heard-of/">OpenNMS: the open source enterprise monitoring solution you&#39;ve never heard of.</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/monitoring/" rel="tag">monitoring</a>
                        <a href="/blog/tag/opennms/" rel="tag">opennms</a>
                    </p>

                    <aside>
                        <p><time datetime="2013-10-31">
                            Posted on 2013-10-31
                        </time>
                            by nwatson
                        </p>
                    </aside>

                </header>

                <p><a href="http://www.opennms.org"><img alt="opennms logo" src="/static/images/opennms.png"></a></p>

<p>Begun in 1999, <a href="http://www.opennms.org">OpenNMS</a> an enterprise scale
monitoring solution written in Java, with a Postgresql database and
configured with XML files. --- Because it uses SNMP OpenNMS can monitor
most servers, network gear, and other appliances without needing a
custom agent. Its <a href="http://www.opennms.org/wiki/Features_List">feature list</a>
is impressive.</p>

<h3>When monitoring, less is more.</h3>

<p>I&#39;ve seen a lot of monitoring products in production over the years,
both proprietary and open source. Most suffer from information overload
because folks set out trying to monitoring everything. They believe
they can catch all problems early, but this never works. Staff are
inundated with so many alerts, most of them false, that searching for
legitimate ones becomes a full time job, or worse, alerts are
intentionally ignored. If you are monitoring or plan to start, start
small, very small, and grow slowly.</p>

<h3>What I like about OpenNMS</h3>

<ul>
<li><p>No message storms. OpenNMS has message correlation, multiple
messages meaning the same thing result in only one alert. A feature
called critical path ensures that multiple and different messages
result in only one alert. For example, if a router is identified as
a critical path, OpenNMS will not generate a storm of alerts for
all hosts behind the router if it goes down.</p></li>
<li><p>Commercial support. OpenNMS creators offer paid support and
consulting services. For do-it-yourselfers, there is a <a href="http://www.opennms.org/wiki/Mailing_lists">mailing
lists</a>, a <a href="http://www.opennms.org/wiki/Tutorial">wiki</a>,
and the #opennms IRC channel at <a href="http://freenode.net">Freenode</a>.</p></li>
<li><p>Scale and stability. OpenNMS was designed from day one to scale to
thousands of nodes at low cost.</p></li>
<li><p>Simple to install. I was able to install and run OpenNMS on a small
virtual host without difficulty.</p></li>
<li><p>SNMP. OpenNMS is not limited to servers supported by a custom
agent. By using SNMP, OpenNMS can support servers, network gear,
storage gear, UPS gear, and so much more. For those of you who
think that SNMP is long in the tooth, look at SNMP version 3, with
more functionality and <a href="https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol#Version_3">full encryption</a>.</p></li>
</ul>

<h1>#</h1>

<h3>What I don&#39;t like about OpenNMS</h3>

<ul>
<li><p>I&#39;m not a fan Java. I&#39;ve been disappointed by many Java
applications over the years, but I had no such disappointment with
OpenNMS. The installation process is easy. One problem I did
encounter, with no solution yet, is that OpenNMS does not start a
boot, no matter what I tried. I resorted to having CFEngine promise
to keep it running.</p></li>
<li><p>Editing XML files sucks. XML was not made for people to ready
continuously.</p></li>
<li><p>Merging XML files for upgrades sucks more. When I upgraded OpenNMS
I was faced with the frustrating exercise of merging the upgrades
with my preexisting changes.</p></li>
<li><p>Confusing documentation. The wiki is often outdated or incomplete.
There is a <a href="https://github.com/OpenNMS/opennmsbook">book</a>, but it
was not easy to find.</p></li>
</ul>

<h1>#</h1>

<p>Every monitoring product I&#39;ve worked with has things I don&#39;t like, so
don&#39;t think I&#39;m singling OpenNMS out. We are now using OpenNMS to
monitor our gear at Evolve and OpenNMS is at the top of my list for any
future monitoring projects.</p>



            </article>
            <article>
                <header>
                    <h1><a href="/blog/2013/07/19/polling-cfengine-with-opennms/">Polling CFEngine with Opennms</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/cfengine/" rel="tag">cfengine</a>
                        <a href="/blog/tag/monitoring/" rel="tag">monitoring</a>
                        <a href="/blog/tag/opennms/" rel="tag">opennms</a>
                    </p>

                    <aside>
                        <p><time datetime="2013-07-19">
                            Posted on 2013-07-19
                        </time>
                            by nwatson
                        </p>
                    </aside>

                </header>

                <p>In the coming months I&#39;m going to work with and write about <a href="http://www.opennms.org">Opennms</a>.
Started in 1999, Opennms is a mature, open source, enterprise scale
monitoring system. --- In this first installment I offer you a way to
monitor CFEngine&#39;s cf-serverd on any host. Since cf-agent typically
promises that cf-serverd running, knowing that cf-serverd is running
tells you that the agent is working.</p>

<p>In my install, Opennms keeps most of its configuration files in
/etc/opennms. First edit capsd-configuration.xml, adding the following
section.</p>

<pre><code>&lt;protocol-plugin protocol=&quot;Cfengine&quot; class-name=&quot;org.opennms.netmgt.capsd.plugins.TcpPlugin&quot; scan=&quot;on&quot;&gt;
   &lt;property key=&quot;port&quot; value=&quot;5308&quot; /&gt;
   &lt;property key=&quot;timeout&quot; value=&quot;2000&quot; /&gt;
   &lt;property key=&quot;retry&quot; value=&quot;1&quot; /&gt;
&lt;/protocol-plugin&gt;
</code></pre>

<p>Second, edit poller-configuration.xml adding these sections.</p>

<pre><code>&lt;service name=&quot;Cfengine&quot; interval=&quot;300000&quot; user-defined=&quot;false&quot; status=&quot;on&quot;&gt;
   &lt;parameter key=&quot;retry&quot; value=&quot;2&quot; /&gt;
   &lt;parameter key=&quot;timeout&quot; value=&quot;3000&quot; /&gt;
   &lt;parameter key=&quot;port&quot; value=&quot;5308&quot;/&gt;
   &lt;parameter key=&quot;rrd-repository&quot; value=&quot;/opt/opennms/share/rrd/response&quot; /&gt;
   &lt;parameter key=&quot;rrd-base-name&quot; value=&quot;cfengine&quot; /&gt;
   &lt;parameter key=&quot;ds-name&quot; value=&quot;cfengine&quot; /&gt;
&lt;/service&gt;

&lt;monitor service=&quot;Cfengine&quot; class-name=&quot;org.opennms.netmgt.poller.monitors.TcpMonitor&quot; /&gt;
</code></pre>

<p>Restart Opennms, then you can manually rescan hosts immediately, or
wait for Opennms to do so in it&#39;s own time, usually overnight.</p>

<p>[caption id=&quot;attachment_521&quot; width=&quot;640&quot;]<a href="/static/images/opennms-cfengine-polling.png"><img alt="screen shot of Opennms reporting CFEngine availability" src="/static/images/opennms-cfengine-polling.png"></a>
Opennms reporting CFEngine availability. Notice anything shiny and
new?[/caption]</p>

<p>Sharp viewers will notice that my node is an IPV6 node. Opennms
supports IPV6, an important considering in the coming years.</p>



            </article>
            <article>
                <header>
                    <h1><a href="/blog/2011/05/26/cfengine-storage/">Disk space monitoring using CFEngine</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/cfengine/" rel="tag">cfengine</a>
                        <a href="/blog/tag/cfengine-cookbook/" rel="tag">cfengine cookbook</a>
                        <a href="/blog/tag/configuration-management/" rel="tag">configuration management</a>
                        <a href="/blog/tag/monitoring/" rel="tag">monitoring</a>
                    </p>

                    <aside>
                        <p><time datetime="2011-05-26">
                            Posted on 2011-05-26
                        </time>
                        </p>
                    </aside>

                </header>

                <h3>Problem</h3>

<p>You want to monitor free disk space.</p>


                    <p><a href="/blog/2011/05/26/cfengine-storage/index.html#section-2">Continue reading Disk space monitoring using CFEngine...</a></p>

            </article>
        </main>

        <ul class="pager">
            <li class="previous disabled">
                <span><span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>Older</span>
            </li>
            <li class="next disabled">
                <span>Newer<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span></span>
            </li>
        </ul>

    </div>

    <div class="sidebar col-md-3">
        <iframe frameborder="0" src="https://duckduckgo.com/search.html?site=watson-wilson.ca&amp;prefill=Search DuckDuckGo" style="overflow:hidden;margin:0;padding:0;width:350px;height:40px;"></iframe>

        <h1>Tags</h1>
        <ul class="list-inline">
            <li><a href="/blog/tag/EFL/">EFL</a></li>
            <li><a href="/blog/tag/anti-virus/">anti-virus</a></li>
            <li><a href="/blog/tag/apt/">apt</a></li>
            <li><a href="/blog/tag/backup/">backup</a></li>
            <li><a href="/blog/tag/best-practices/">best practices</a></li>
            <li><a href="/blog/tag/cfengine/">cfengine</a></li>
            <li><a href="/blog/tag/cfengine-cookbook/">cfengine cookbook</a></li>
            <li><a href="/blog/tag/cheatsheet/">cheatsheet</a></li>
            <li><a href="/blog/tag/cli/">cli</a></li>
            <li><a href="/blog/tag/cloud/">cloud</a></li>
            <li><a href="/blog/tag/cluster/">cluster</a></li>
            <li><a href="/blog/tag/conferences/">conferences</a></li>
            <li><a href="/blog/tag/configuration-management/">configuration management</a></li>
            <li><a href="/blog/tag/cron/">cron</a></li>
            <li><a href="/blog/tag/debian/">debian</a></li>
            <li><a href="/blog/tag/delta-reporting/">delta reporting</a></li>
            <li><a href="/blog/tag/devops/">devops</a></li>
            <li><a href="/blog/tag/dns/">dns</a></li>
            <li><a href="/blog/tag/dr/">dr</a></li>
            <li><a href="/blog/tag/heartbeat/">heartbeat</a></li>
            <li><a href="/blog/tag/high-availability/">high availability</a></li>
            <li><a href="/blog/tag/infosec/">infosec</a></li>
            <li><a href="/blog/tag/ipv6/">ipv6</a></li>
            <li><a href="/blog/tag/irc/">irc</a></li>
            <li><a href="/blog/tag/iscsi/">iscsi</a></li>
            <li><a href="/blog/tag/jekyll/">jekyll</a></li>
            <li><a href="/blog/tag/kickstart/">kickstart</a></li>
            <li><a href="/blog/tag/kvm/">kvm</a></li>
            <li><a href="/blog/tag/linux/">linux</a></li>
            <li><a href="/blog/tag/monitoring/">monitoring</a></li>
            <li><a href="/blog/tag/multipathd/">multipathd</a></li>
            <li><a href="/blog/tag/mustache/">mustache</a></li>
            <li><a href="/blog/tag/networking/">networking</a></li>
            <li><a href="/blog/tag/opennms/">opennms</a></li>
            <li><a href="/blog/tag/opensource/">opensource</a></li>
            <li><a href="/blog/tag/oracle/">oracle</a></li>
            <li><a href="/blog/tag/patching/">patching</a></li>
            <li><a href="/blog/tag/pcre/">pcre</a></li>
            <li><a href="/blog/tag/perl/">perl</a></li>
            <li><a href="/blog/tag/posix/">posix</a></li>
            <li><a href="/blog/tag/programming/">programming</a></li>
            <li><a href="/blog/tag/provisioning/">provisioning</a></li>
            <li><a href="/blog/tag/red-hat/">red hat</a></li>
            <li><a href="/blog/tag/redhat/">redhat</a></li>
            <li><a href="/blog/tag/regex/">regex</a></li>
            <li><a href="/blog/tag/rhev/">rhev</a></li>
            <li><a href="/blog/tag/san/">san</a></li>
            <li><a href="/blog/tag/satellite/">satellite</a></li>
            <li><a href="/blog/tag/scripting/">scripting</a></li>
            <li><a href="/blog/tag/security/">security</a></li>
            <li><a href="/blog/tag/serverspec/">serverspec</a></li>
            <li><a href="/blog/tag/shell/">shell</a></li>
            <li><a href="/blog/tag/software-testing/">software testing</a></li>
            <li><a href="/blog/tag/solaris/">solaris</a></li>
            <li><a href="/blog/tag/spacewalk/">spacewalk</a></li>
            <li><a href="/blog/tag/ssh/">ssh</a></li>
            <li><a href="/blog/tag/statocles/">statocles</a></li>
            <li><a href="/blog/tag/subversion/">subversion</a></li>
            <li><a href="/blog/tag/sun/">sun</a></li>
            <li><a href="/blog/tag/support/">support</a></li>
            <li><a href="/blog/tag/svn/">svn</a></li>
            <li><a href="/blog/tag/sysadmin/">sysadmin</a></li>
            <li><a href="/blog/tag/sysctl/">sysctl</a></li>
            <li><a href="/blog/tag/terraform/">terraform</a></li>
            <li><a href="/blog/tag/virus/">virus</a></li>
            <li><a href="/blog/tag/vitualization/">vitualization</a></li>
            <li><a href="/blog/tag/website/">website</a></li>
        </ul>
        <h1>Feeds</h1>
        <ul class="list-inline">
            <li>
                <a href="/blog/tag/monitoring.atom" rel="alternate" type="application/atom+xml">
                    Atom
                </a>
            </li>
            <li>
                <a href="/blog/tag/monitoring.rss" rel="alternate" type="application/rss+xml">
                    RSS
                </a>
            </li>
        </ul>
    </div>

</div>


        </div>
        <footer>
            
            <h1></h1>
            <div class="col-md-5"> </div>
            <div class="col-md-3 container tagline">
                <a href="http://preaction.me/statocles">Made with Statocles</a><br>
                <a href="http://www.perl.org">Powered by Perl</a>
            </div>
        </footer>
    </body>
</html>
